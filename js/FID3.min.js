!function(){var t=["AENC","APIC","COMM","COMR","ENCR","EQUA","ETCO","GEOB","GRID","IPLS","LINK","MCDI","MLLT","OWNE","PRIV","PCNT","POPM","POSS","RBUF","RVAD","RVRB","SYLT","SYTC","TALB","TBPM","TCOM","TCON","TCOP","TDAT","TDLY","TENC","TEXT","TFLT","TIME","TIT1","TIT2","TIT3","TKEY","TLAN","TLEN","TMED","TOAL","TOFN","TOLY","TOPE","TORY","TOWN","TPE1","TPE2","TPE3","TPE4","TPOS","TPUB","TRCK","TRDA","TRSN","TRSO","TSIZ","TSRC","TSSE","TYER","TXXX","UFID","USER","USLT","WCOM","WCOP","WOAF","WOAR","WOAS","WORS","WPAY","WPUB","WXXX","CNT","BUF","COM","CRA","CRM","ETC","EQU","GEO","IPL","LNK","MCI","MLL","PIC","POP","REV","RVA","SLT","STC","TAL","TBP","TCM","TCO","TCR","TDA","TDY","TEN","TFT","TIM","TKE","TLA","TLE","TMT","TOA","TOF","TOL","TOR","TOT","TP1","TP2","TP3","TP4","TPA","TPB","TRC","TRD","TRK","TSI","TSS","TT1","TT2","TT3","TXT","TXX","TYE","UFI","ULT","WAF","WAR","WAS","WCM","WCP","WPB","WXX"],e=function(e,n){var i,r,T=new Uint8Array(n.slice(e,e+10)),o=String.fromCharCode.apply(null,T.slice(0,4)),a=o.slice(0,-1);return t.indexOf(o)>-1?(i=T.slice(4,8),r=new Uint32Array(i.reverse().buffer)[0],{tag:o,size:r,position:e+10}):t.indexOf(a)>-1?(i=T.slice(3,6),r=65536*i[0]+256*i[1]+i[2],{tag:a,size:r,position:e+6}):{nothing:1}},n={picture:function(t,e,n){for(var i=n.position,r=n.size,T=e.slice(i,i+512),o=new Uint8Array(T),a=1;0!==o[a];a++);for(var s=String.fromCharCode.apply(null,o.slice(1,a)),u=0;0===o[a]&&u<2;a++,u++);for(;0!==o[a];a++);for(;0===o[a];a++);return{blob:new Blob([e.slice(i+a,i+r)],{type:s}),mime:s}},txt:function(t,e,n){if(n<1)return{text:null};var i=new Uint8Array(t.slice(e,e+n)),r=i[0];return i=i.slice(1),{text:new TextDecoder(function(t){return 0===t?"ISO-8859-1":1===t?"UTF-16":2===t?"UTF-16BE":3===t?"UTF-8":""}(r)).decode(i).replace("\0","")}},album:function(t,e,n){return this.txt(e,n.position,n.size)},artist:function(t,e,n){return this.txt(e,n.position,n.size)},title:function(t,e,n){return this.txt(e,n.position,n.size)},year:function(t,e,n){return this.txt(e,n.position,n.size)},track:function(t,e,n){return this.txt(e,n.position,n.size)},genre:function(t,e,n){var i=this.txt(e,n.position,n.size).text,r=i.match(/\(([0-9]+)\)/),T=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock"];return r?{text:T[r[1]-0]}:{text:i}}},i=function(t,n,i){null==i&&(i=console.error);var r=new FileReader;r.onload=function(t){if("ID3"!==String.fromCharCode.apply(null,new Uint8Array(t.target.result.slice(0,3))))return i("NOT ID3");var r=function(i,T){null==T&&(T=[]);var o=e(i,t.target.result);return o.nothing?n(T,t.target.result):(T.push(o),r(o.position+o.size,T))};r(10)},r.readAsArrayBuffer(t)},r=function(t,e,r){null!==e&&void 0!==e||(e={});var T={album:!!e.album,artist:!!e.artist,picture:!!e.picture,title:!!e.title,year:!!e.year,track:!!e.track,genre:!!e.genre},o={album:["TALB","TAL"],picture:["PIC","APIC"],artist:["TP1","TPE1"],title:["TIT2","TT2"],year:["TYER","TYE","TDRC"],track:["TRCK","TRK"],genre:["TCON","TCO"]};i(t,function(e,i){var a={};for(var s in T)if(T[s])for(var u in e)o[s].indexOf(e[u].tag)>-1&&(a[s]=n[s](t,i,e[u]));r(a)})},T=function(t,e){return this.file=t,this.options=e,this};T.prototype={readSync:function(){console.info("FID3.readSync not implemented yet")},read:function(t){r(this.file,this.options,t)}};try{module.exports.FID3=T}catch(t){window.FID3=T}}();
